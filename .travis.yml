env:
  global:
    - CC_TEST_REPORTER_ID=4796fc8abec9f60231051df2c2523b62c6f650137be5458aada65a7bbc79e6aa
language: php
php:
  - '7.0'
  - '7.1'
  - '7.2'
before_script:
  - curl -L https://codeclimate.com/downloads/test-reporter/test-reporter-latest-linux-amd64 > ./cc-test-reporter
  - chmod +x ./cc-test-reporter
  - if [ $(phpenv version-name) = "7.2" ]; then ./cc-test-reporter before-build; fi
install:
  - composer install
script:
  - phpunit --coverage-clover clover.xml
after_script:
    - if [ $(phpenv version-name) = "7.2" ] && [ "$TRAVIS_PULL_REQUEST" == "false" ]; then ./cc-test-reporter after-build --exit-code $TRAVIS_TEST_RESULT; fi
